<!DOCTYPE html>
<html class="scroll-smooth" lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>Mentes em Jogo: A Jornada Filosófica</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=GFS+Didot&amp;family=Open+Sans&amp;display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #fefcf7;
    }
    .font-greek {
      font-family: 'GFS Didot', serif;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #fefcf7;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #bfa14a;
      border-radius: 10px;
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #f00;
      opacity: 0;
      animation: confetti-fall 3s ease-in-out forwards;
    }
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    .music-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgba(191, 161, 74, 0.8);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 100;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-b from-[#0b1e3d] via-[#1a2e5a] to-[#0b1e3d] text-white">
  <!-- Controle de Música -->
  <div class="music-control" id="music-control">
    <i class="fas fa-music text-white text-xl"></i>
  </div>

  <header class="bg-gradient-to-r from-[#bfa14a] to-[#8c7a2a] shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3 md:py-4">
      <div class="flex items-center space-x-3">
        <img alt="Ícone da coruja de Atena" class="w-12 h-12" height="48" src="https://storage.googleapis.com/a1aa/image/d8689e5f-1547-476b-764d-de27761369fe.jpg" width="48"/>
        <h1 class="font-greek text-2xl md:text-3xl font-semibold tracking-wide drop-shadow-md select-none">Mentes em Jogo</h1>
      </div>
      <nav class="hidden md:flex space-x-6 font-semibold text-white/90">
        <button class="hover:text-white transition-colors" id="btn-home">Início</button>
        <button class="hover:text-white transition-colors" id="btn-phases">Fases</button>
        <button class="hover:text-white transition-colors" id="btn-ranking">Ranking</button>
        <button class="hover:text-white transition-colors" id="btn-editor">Editor</button>
      </nav>
      <button aria-label="Abrir menu" class="md:hidden text-white text-2xl hover:text-yellow-400 transition-colors" id="btn-menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <nav class="hidden md:hidden bg-[#bfa14a] text-[#0b1e3d] font-semibold" id="mobile-menu">
      <button class="block w-full text-left px-6 py-3 border-b border-yellow-700 hover:bg-yellow-300 transition-colors" id="m-btn-home">Início</button>
      <button class="block w-full text-left px-6 py-3 border-b border-yellow-700 hover:bg-yellow-300 transition-colors" id="m-btn-phases">Fases</button>
      <button class="block w-full text-left px-6 py-3 border-b border-yellow-700 hover:bg-yellow-300 transition-colors" id="m-btn-ranking">Ranking</button>
      <button class="block w-full text-left px-6 py-3 hover:bg-yellow-300 transition-colors" id="m-btn-editor">Editor</button>
    </nav>
  </header>

  <main class="flex-grow max-w-7xl mx-auto px-4 py-6 md:py-10">
    <!-- Tela Inicial -->
    <section class="space-y-6 max-w-4xl mx-auto text-center" id="home">
      <img alt="Imagem estilizada de colunas gregas antigas" class="mx-auto rounded-lg shadow-lg" height="300" src="https://storage.googleapis.com/a1aa/image/f12c4aea-8536-4289-7b45-0a6038bc63fe.jpg" width="600"/>
      <h2 class="font-greek text-4xl md:text-5xl font-bold text-yellow-400 drop-shadow-lg">Mentes em Jogo: A Jornada Filosófica</h2>
      <p class="text-lg md:text-xl text-white/90 max-w-3xl mx-auto leading-relaxed">
        Um jogo educativo para explorar a Filosofia da Educação de forma interativa e divertida. Aprenda, revise e teste seus conhecimentos enquanto avança pelas fases.
      </p>
      <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-8 py-3 rounded-lg shadow-lg hover:bg-yellow-500 transition-colors text-lg md:text-xl" id="start-game">
        Começar a Jornada
      </button>
    </section>

    <!-- Tela de Registro -->
    <section class="hidden max-w-md mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400" id="register">
      <h2 class="font-greek text-3xl text-yellow-400 mb-6 text-center">Crie seu Perfil</h2>
      <div class="space-y-4">
        <div>
          <label class="block mb-1 font-semibold text-white/90" for="player-name">Nome ou Apelido:</label>
          <input type="text" id="player-name" class="w-full rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
        </div>
        
        <div>
          <label class="block mb-1 font-semibold text-white/90">Escolha seu Avatar:</label>
          <div class="grid grid-cols-4 gap-4 mt-2">
            <div class="avatar-option cursor-pointer p-1 rounded-full border-2 border-transparent hover:border-yellow-400 transition-colors" data-avatar="1">
              <img src="https://storage.googleapis.com/a1aa/image/683468cd-3a4f-47db-484b-20d9b719cd8b.jpg" alt="Avatar 1" class="w-16 h-16 rounded-full">
            </div>
            <div class="avatar-option cursor-pointer p-1 rounded-full border-2 border-transparent hover:border-yellow-400 transition-colors" data-avatar="2">
              <img src="https://storage.googleapis.com/a1aa/image/d8689e5f-1547-476b-764d-de27761369fe.jpg" alt="Avatar 2" class="w-16 h-16 rounded-full">
            </div>
            <div class="avatar-option cursor-pointer p-1 rounded-full border-2 border-transparent hover:border-yellow-400 transition-colors" data-avatar="3">
              <img src="https://storage.googleapis.com/a1aa/image/f12c4aea-8536-4289-7b45-0a6038bc63fe.jpg" alt="Avatar 3" class="w-16 h-16 rounded-full">
            </div>
            <div class="avatar-option cursor-pointer p-1 rounded-full border-2 border-transparent hover:border-yellow-400 transition-colors" data-avatar="4">
              <img src="https://via.placeholder.com/64" alt="Avatar 4" class="w-16 h-16 rounded-full">
            </div>
          </div>
        </div>
        
        <button class="mt-6 w-full bg-yellow-400 text-[#0b1e3d] font-semibold px-8 py-3 rounded-lg shadow-lg hover:bg-yellow-500 transition-colors" id="btn-start-game">Iniciar Jogo</button>
      </div>
    </section>

    <!-- Tela de Fases -->
    <section class="hidden max-w-5xl mx-auto space-y-8" id="phases">
      <h2 class="font-greek text-3xl text-yellow-400 mb-4 text-center">Fases do Jogo</h2>
      <div class="grid gap-8 md:grid-cols-2">
        <article class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 hover:bg-white/20 transition-colors">
          <h3 class="font-greek text-2xl text-yellow-300 mb-2">Fase 1 – O Despertar Filosófico</h3>
          <p class="text-white/90 mb-2 font-semibold">Tema: O sentido da Filosofia da Educação</p>
          <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors" data-phase="1" id="phase-1-btn">Iniciar Fase 1</button>
        </article>
        <article class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 hover:bg-white/20 transition-colors">
          <h3 class="font-greek text-2xl text-yellow-300 mb-2">Fase 2 – As Origens do Pensamento</h3>
          <p class="text-white/90 mb-2 font-semibold">Tema: A origem do pensamento ocidental e a preocupação com o conhecimento</p>
          <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors" data-phase="2" id="phase-2-btn" disabled>Bloqueado</button>
        </article>
        <article class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 hover:bg-white/20 transition-colors">
          <h3 class="font-greek text-2xl text-yellow-300 mb-2">Fase 3 – Vozes de Atenas</h3>
          <p class="text-white/90 mb-2 font-semibold">Tema: Sócrates e Platão na Educação</p>
          <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors" data-phase="3" id="phase-3-btn" disabled>Bloqueado</button>
        </article>
        <article class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 hover:bg-white/20 transition-colors">
          <h3 class="font-greek text-2xl text-yellow-300 mb-2">Fase 4 – A Lógica de Aristóteles</h3>
          <p class="text-white/90 mb-2 font-semibold">Tema: A questão do conhecimento segundo Aristóteles</p>
          <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors" data-phase="4" id="phase-4-btn" disabled>Bloqueado</button>
        </article>
        <article class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 hover:bg-white/20 transition-colors md:col-span-2">
          <h3 class="font-greek text-2xl text-yellow-300 mb-2">Fase 5 – Ética e Formação</h3>
          <p class="text-white/90 mb-2 font-semibold">Tema: Questões éticas, educação e formação de professores</p>
          <button class="mt-4 bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors" data-phase="5" id="phase-5-btn" disabled>Bloqueado</button>
        </article>
      </div>
    </section>

    <!-- Tela do Quiz -->
    <section class="hidden max-w-4xl mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400" id="quiz">
      <div class="flex justify-between items-center mb-4">
        <div class="flex items-center space-x-3">
          <img alt="Avatar do jogador" class="w-16 h-16 rounded-full border-2 border-yellow-400 shadow-md" height="64" id="quiz-avatar" width="64"/>
          <div>
            <h3 class="font-greek text-2xl text-yellow-400 font-semibold" id="phase-title"></h3>
            <p class="text-white/80 text-sm" id="player-name-display"></p>
          </div>
        </div>
        <div class="text-white/90 font-semibold text-sm md:text-base">
          Pergunta <span id="current-question">1</span> de <span id="total-questions">5</span>
        </div>
      </div>
      <div class="text-white text-xl md:text-2xl font-semibold mb-6 leading-relaxed" id="question-text"></div>
      <div class="grid gap-4" id="answers"></div>
      <div class="mt-6 text-lg font-semibold rounded-md p-4 hidden" id="feedback"></div>
      <div class="mt-2 text-white/90 italic hidden" id="explanation"></div>
      <div class="mt-6 flex justify-between items-center">
        <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" id="btn-hint">
          <i class="fas fa-lightbulb mr-2"></i> Usar Dica (<span id="hints-left">2</span> restantes)
        </button>
        <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-5 py-2 rounded-md hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled id="btn-next">
          Próxima
        </button>
      </div>
    </section>

    <!-- Tela de Resultados -->
    <section class="hidden max-w-4xl mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 text-center" id="results">
      <h2 class="font-greek text-3xl text-yellow-400 mb-4">Resultado da Fase</h2>
      <p class="text-white/90 text-xl mb-4" id="score-text"></p>
      <div class="mb-6 flex justify-center space-x-6" id="medal-container"></div>
      <div id="feedback-message" class="text-white/90 text-lg mb-6"></div>
      <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-8 py-3 rounded-lg hover:bg-yellow-500 transition-colors" id="btn-next-phase">
        Avançar para a próxima fase
      </button>
      <button class="mt-4 text-yellow-300 underline hover:text-yellow-400 transition-colors" id="btn-back-phases">
        Voltar para as fases
      </button>
    </section>

    <!-- Tela de Ranking -->
    <section class="hidden max-w-4xl mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400" id="ranking">
      <h2 class="font-greek text-3xl text-yellow-400 mb-4 text-center">Ranking de Pontuação</h2>
      <table class="w-full text-white/90 text-left border-collapse">
        <thead>
          <tr class="border-b border-yellow-400">
            <th class="py-2 px-4 font-semibold">Posição</th>
            <th class="py-2 px-4 font-semibold">Jogador</th>
            <th class="py-2 px-4 font-semibold">Avatar</th>
            <th class="py-2 px-4 font-semibold">Pontuação</th>
            <th class="py-2 px-4 font-semibold">Título</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-yellow-400/50" id="ranking-list"></tbody>
      </table>
      <div class="mt-6 flex justify-center">
        <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-6 py-2 rounded-md hover:bg-yellow-500 transition-colors" id="btn-ranking-back">
          Voltar
        </button>
      </div>
    </section>

    <!-- Tela de Editor -->
    <section class="hidden max-w-4xl mx-auto" id="editor-login">
      <div class="bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400">
        <h2 class="font-greek text-3xl text-yellow-400 mb-6 text-center">Acesso ao Editor</h2>
        <div class="space-y-4">
          <div>
            <label class="block mb-1 font-semibold text-white/90" for="editor-token">Token de Acesso:</label>
            <input type="password" id="editor-token" class="w-full rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
          </div>
          <button class="mt-4 w-full bg-yellow-400 text-[#0b1e3d] font-semibold px-8 py-3 rounded-lg shadow-lg hover:bg-yellow-500 transition-colors" id="btn-editor-login">
            Acessar Editor
          </button>
          <button class="mt-2 w-full text-yellow-300 underline hover:text-yellow-400 transition-colors" id="btn-editor-back">
            Voltar
          </button>
        </div>
      </div>
    </section>

    <!-- Tela de Edição -->
    <section class="hidden max-w-4xl mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400" id="editor">
      <h2 class="font-greek text-3xl text-yellow-400 mb-4 text-center">Editor de Perguntas</h2>
      <form class="space-y-4 text-white/90" id="editor-form">
        <div>
          <label class="block mb-1 font-semibold" for="editor-phase-select">Selecione a fase:</label>
          <select class="w-full rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-phase-select" required>
            <option value="1">Fase 1 – O Despertar Filosófico</option>
            <option value="2">Fase 2 – As Origens do Pensamento</option>
            <option value="3">Fase 3 – Vozes de Atenas</option>
            <option value="4">Fase 4 – A Lógica de Aristóteles</option>
            <option value="5">Fase 5 – Ética e Formação</option>
          </select>
        </div>
        <div>
          <label class="block mb-1 font-semibold" for="editor-question-input">Pergunta:</label>
          <textarea class="w-full rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-question-input" required rows="3"></textarea>
        </div>
        <div>
          <label class="block mb-1 font-semibold">Alternativas (marque a correta):</label>
          <div class="space-y-2">
            <div class="flex items-center space-x-2">
              <input type="radio" name="editor-correct-answer" value="0" id="editor-answer1-radio" required>
              <input type="text" class="flex-grow rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-answer1-text" placeholder="Alternativa 1" required>
            </div>
            <div class="flex items-center space-x-2">
              <input type="radio" name="editor-correct-answer" value="1" id="editor-answer2-radio">
              <input type="text" class="flex-grow rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-answer2-text" placeholder="Alternativa 2" required>
            </div>
            <div class="flex items-center space-x-2">
              <input type="radio" name="editor-correct-answer" value="2" id="editor-answer3-radio">
              <input type="text" class="flex-grow rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-answer3-text" placeholder="Alternativa 3" required>
            </div>
            <div class="flex items-center space-x-2">
              <input type="radio" name="editor-correct-answer" value="3" id="editor-answer4-radio">
              <input type="text" class="flex-grow rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-answer4-text" placeholder="Alternativa 4 (opcional)">
            </div>
          </div>
        </div>
        <div>
          <label class="block mb-1 font-semibold" for="editor-explanation-input">Explicação curta (após resposta):</label>
          <textarea class="w-full rounded-md bg-[#1a2e5a] border border-yellow-400 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400" id="editor-explanation-input" required rows="2"></textarea>
        </div>
        <div class="flex justify-between items-center">
          <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-6 py-2 rounded-md hover:bg-yellow-500 transition-colors" type="submit">
            Salvar Pergunta
          </button>
          <button class="text-yellow-300 underline hover:text-yellow-400 transition-colors" id="btn-editor-exit" type="button">
            Sair do Editor
          </button>
        </div>
      </form>
      <div class="mt-4 text-center font-semibold" id="editor-message"></div>
    </section>

    <!-- Tela de Conclusão -->
    <section class="hidden max-w-4xl mx-auto bg-white/10 rounded-xl p-6 shadow-lg border border-yellow-400 text-center" id="completion">
      <h2 class="font-greek text-4xl text-yellow-400 mb-6">Parabéns!</h2>
      <p class="text-white/90 text-xl mb-6">Você concluiu todas as fases do jogo Mentes em Jogo!</p>
      <p class="text-white/80 text-lg mb-8" id="final-feedback"></p>
      <div class="flex justify-center space-x-4">
        <button class="bg-yellow-400 text-[#0b1e3d] font-semibold px-6 py-2 rounded-md hover:bg-yellow-500 transition-colors" id="btn-completion-ranking">
          Ver Ranking
        </button>
        <button class="bg-transparent border border-yellow-400 text-yellow-400 font-semibold px-6 py-2 rounded-md hover:bg-yellow-400/20 transition-colors" id="btn-completion-home">
          Voltar ao Início
        </button>
      </div>
    </section>
  </main>

  <!-- Áudio para música de fundo e efeitos sonoros -->
  <audio id="background-music" loop>
    <!-- Substitua pelo seu arquivo de música -->
    <source src="sons/background-music.mp3" type="audio/mpeg">
    Seu navegador não suporta o elemento de áudio.
  </audio>
  <audio id="correct-sound">
    <!-- Substitua pelo seu arquivo de efeito sonoro -->
    <source src="correct.mp3" type="audio/mpeg">
  </audio>
  <audio id="wrong-sound">
    <!-- Substitua pelo seu arquivo de efeito sonoro -->
    <source src="wrong.mp3" type="audio/mpeg">
  </audio>
  <audio id="complete-sound">
    <!-- Substitua pelo seu arquivo de efeito sonoro -->
    <source src="complete.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Dados do jogo
    const gameData = {
      player: {
        name: '',
        avatar: '',
        score: 0,
        unlockedPhases: 1,
        completedPhases: []
      },
      
      // Perguntas iniciais (podem ser editadas no modo editor)
      questions: {
        1: [
          {
            question: "Qual é o principal objetivo da Filosofia da Educação?",
            answers: [
              "Formar cidadãos críticos e reflexivos",
              "Transmitir conhecimentos técnicos",
              "Preparar para o mercado de trabalho",
              "Manter tradições culturais"
            ],
            correct: 0,
            explanation: "A Filosofia da Educação busca formar indivíduos capazes de pensar criticamente sobre o mundo e sua própria existência."
          },
          {
            question: "Qual destes NÃO é um papel da Filosofia da Educação?",
            answers: [
              "Questionar os fundamentos da prática educativa",
              "Definir métodos pedagógicos únicos e universais",
              "Refletir sobre os fins da educação",
              "Analisar os valores envolvidos no processo educativo"
            ],
            correct: 1,
            explanation: "A Filosofia da Educação não busca definir métodos únicos, mas sim refletir sobre os diversos aspectos da educação."
          },
          {
            question: "Qual filósofo é considerado o 'pai' da Filosofia da Educação?",
            answers: [
              "Sócrates",
              "Platão",
              "Aristóteles",
              "Não há um único 'pai', é uma construção coletiva"
            ],
            correct: 3,
            explanation: "A Filosofia da Educação é um campo construído por diversos pensadores ao longo da história."
          },
          {
            question: "A Filosofia da Educação se preocupa principalmente com:",
            answers: [
              "O 'como' ensinar (métodos)",
              "O 'porquê' e 'para quê' ensinar (fins)",
              "A avaliação de aprendizagem",
              "A gestão escolar"
            ],
            correct: 1,
            explanation: "Enquanto a Pedagogia se preocupa mais com os métodos, a Filosofia da Educação reflete sobre os fins e significados."
          },
          {
            question: "Qual destes aspectos NÃO faz parte da reflexão filosófica sobre educação?",
            answers: [
              "A natureza do conhecimento",
              "A relação professor-aluno",
              "O currículo escolar detalhado",
              "Os valores éticos na educação"
            ],
            correct: 2,
            explanation: "O currículo detalhado é mais objeto da Didática, enquanto a Filosofia se preocupa com fundamentos mais amplos."
          }
        ],
        2: [
          {
            question: "Qual foi a principal preocupação dos pré-socráticos?",
            answers: [
              "A origem e constituição do universo",
              "A vida após a morte",
              "A organização política",
              "A educação das crianças"
            ],
            correct: 0,
            explanation: "Os pré-socráticos buscavam entender o princípio (arché) que originava todas as coisas."
          },
          {
            question: "Qual destes NÃO foi um pré-socrático?",
            answers: [
              "Tales de Mileto",
              "Parmênides",
              "Heráclito",
              "Sócrates"
            ],
            correct: 3,
            explanation: "Sócrates marca justamente a transição para uma nova fase da filosofia, preocupada com questões humanas."
          },
          {
            question: "Qual a principal diferença entre o pensamento mítico e o filosófico?",
            answers: [
              "O pensamento filosófico busca explicações racionais",
              "O pensamento mítico é mais complexo",
              "A filosofia não usa narrativas",
              "O mito é sempre falso, a filosofia sempre verdadeira"
            ],
            correct: 0,
            explanation: "A filosofia nasce quando se busca explicações baseadas na razão (logos) em vez de narrativas míticas."
          },
          {
            question: "Qual destes conceitos foi desenvolvido pelos pré-socráticos?",
            answers: [
              "Logos",
              "Dialética",
              "Mundo das Ideias",
              "Silogismo"
            ],
            correct: 0,
            explanation: "O conceito de logos (razão, discurso) foi desenvolvido por Heráclito e outros pré-socráticos."
          },
          {
            question: "Por que o pensamento filosófico surgiu na Grécia antiga?",
            answers: [
              "Devido ao contato com outras culturas e condições sociais favoráveis",
              "Porque os gregos eram mais inteligentes",
              "Por determinação dos deuses",
              "Por acaso histórico"
            ],
            correct: 0,
            explanation: "Fatores como contato cultural, desenvolvimento da pólis e alfabeto fonético contribuíram para o surgimento da filosofia."
          }
        ],
        3: [
          {
            question: "Qual era o método filosófico desenvolvido por Sócrates?",
            answers: [
              "Maiêutica",
              "Dialética",
              "Silogismo",
              "Empirismo"
            ],
            correct: 0,
            explanation: "Sócrates desenvolveu a maiêutica, método de 'dar à luz' ideias através de perguntas."
          },
          {
            question: "Qual a principal contribuição de Platão para a educação?",
            answers: [
              "A ideia de que o conhecimento está na alma e precisa ser 'lembrado'",
              "A criação de escolas técnicas",
              "O desenvolvimento de métodos de memorização",
              "A defesa da educação apenas para a elite"
            ],
            correct: 0,
            explanation: "Platão defendia a teoria da reminiscência - o conhecimento está na alma e a educação ajuda a 'recordá-lo'."
          },
          {
            question: "O que era a Academia de Platão?",
            answers: [
              "A primeira instituição de ensino superior do Ocidente",
              "Uma escola militar",
              "Um centro de treinamento político",
              "Um local para culto aos deuses"
            ],
            correct: 0,
            explanation: "A Academia foi fundada por Platão em 387 a.C. e é considerada a primeira universidade ocidental."
          },
          {
            question: "Qual a relação entre Sócrates e Platão?",
            answers: [
              "Platão foi discípulo de Sócrates",
              "Eram contemporâneos sem relação",
              "Platão foi mestre de Sócrates",
              "Eram inimigos filosóficos"
            ],
            correct: 0,
            explanation: "Platão foi discípulo de Sócrates e registrou seus ensinamentos nos Diálogos."
          },
          {
            question: "Qual destes conceitos NÃO está presente no pensamento de Platão?",
            answers: [
              "Mundo sensível e mundo inteligível",
              "Alegoria da caverna",
              "O filósofo-rei",
              "A felicidade como fim último"
            ],
            correct: 3,
            explanation: "A felicidade como fim último é um conceito aristotélico, não platônico."
          }
        ],
        4: [
          {
            question: "Qual a principal diferença entre Platão e Aristóteles quanto ao conhecimento?",
            answers: [
              "Aristóteles valorizava a experiência sensível, Platão não",
              "Platão era empirista, Aristóteles racionalista",
              "Aristóteles rejeitava totalmente as ideias de Platão",
              "Não havia diferenças significativas"
            ],
            correct: 0,
            explanation: "Aristóteles valorizava a observação do mundo sensível, enquanto Platão privilegiava o mundo das ideias."
          },
          {
            question: "Qual destes conceitos foi desenvolvido por Aristóteles?",
            answers: [
              "Silogismo",
              "Maiêutica",
              "Alegoria da caverna",
              "Teoria das ideias"
            ],
            correct: 0,
            explanation: "O silogismo é a base da lógica aristotélica, com premissas que levam a uma conclusão."
          },
          {
            question: "O que Aristóteles entendia por virtude?",
            answers: [
              "O justo meio entre os extremos",
              "A obediência cega às leis",
              "A rejeição dos prazeres",
              "O conhecimento puro e desinteressado"
            ],
            correct: 0,
            explanation: "Para Aristóteles, a virtude está no equilíbrio (mesotes) entre excesso e falta."
          },
          {
            question: "Qual era o objetivo da educação para Aristóteles?",
            answers: [
              "Formar cidadãos virtuosos para a pólis",
              "Preparar para o mercado de trabalho",
              "Transmitir conhecimentos técnicos",
              "Desenvolver habilidades artísticas"
            ],
            correct: 0,
            explanation: "Aristóteles via a educação como meio para formar cidadãos éticos e virtuosos, capazes de contribuir para a pólis."
          },
          {
            question: "Qual destas obras NÃO foi escrita por Aristóteles?",
            answers: [
              "A República",
              "Ética a Nicômaco",
              "Política",
              "Metafísica"
            ],
            correct: 0,
            explanation: "A República é obra de Platão, enquanto as outras são de Aristóteles."
          }
        ],
        5: [
          {
            question: "Qual o principal aspecto ético na formação de professores?",
            answers: [
              "O compromisso com o desenvolvimento integral do educando",
              "A transmissão fiel dos conteúdos programáticos",
              "A manutenção da disciplina em sala de aula",
              "O cumprimento rigoroso do calendário escolar"
            ],
            correct: 0,
            explanation: "A ética docente está centrada no compromisso com o desenvolvimento pleno dos estudantes."
          },
          {
            question: "Qual destes NÃO é um princípio da ética na educação?",
            answers: [
              "Respeito à diversidade",
              "Autoritarismo pedagógico",
              "Diálogo constante",
              "Responsabilidade social"
            ],
            correct: 1,
            explanation: "O autoritarismo é contrário aos princípios éticos da educação, que valorizam o diálogo e o respeito."
          },
          {
            question: "Qual a principal contribuição da ética para a formação docente?",
            answers: [
              "Refletir sobre os valores e princípios da prática educativa",
              "Fornecer técnicas de ensino mais eficientes",
              "Garantir o cumprimento de normas disciplinares",
              "Otimizar o tempo em sala de aula"
            ],
            correct: 0,
            explanation: "A ética na formação docente visa refletir sobre os valores e princípios que fundamentam a prática educativa."
          },
          {
            question: "Qual destes pensadores contribuiu significativamente para a ética na educação?",
            answers: [
              "Paulo Freire",
              "Jean Piaget",
              "Lev Vygotsky",
              "B. F. Skinner"
            ],
            correct: 0,
            explanation: "Paulo Freire trouxe importantes contribuições éticas com sua pedagogia do oprimido e valorização do diálogo."
          },
          {
            question: "Qual o papel do professor na formação ética dos alunos?",
            answers: [
              "Ser exemplo e mediador na construção de valores",
              "Transmitir normas de conduta prontas",
              "Controlar o comportamento dos alunos",
              "Delegar essa tarefa apenas para a família"
            ],
            correct: 0,
            explanation: "O professor deve ser mediador e exemplo, ajudando os alunos a construírem seus valores de forma crítica."
          }
        ]
      },
      
      // Ranking de jogadores
      ranking: []
    };

    // Elementos do DOM
    const sections = {
      home: document.getElementById('home'),
      register: document.getElementById('register'),
      phases: document.getElementById('phases'),
      quiz: document.getElementById('quiz'),
      results: document.getElementById('results'),
      ranking: document.getElementById('ranking'),
      editorLogin: document.getElementById('editor-login'),
      editor: document.getElementById('editor'),
      completion: document.getElementById('completion')
    };

    // Elementos de áudio
    const audio = {
      backgroundMusic: document.getElementById('background-music'),
      correctSound: document.getElementById('correct-sound'),
      wrongSound: document.getElementById('wrong-sound'),
      completeSound: document.getElementById('complete-sound')
    };

    // Controle de música
    const musicControl = document.getElementById('music-control');
    let isMusicPlaying = false;

    // Estado do jogo
    let currentState = {
      phase: 1,
      currentQuestion: 0,
      score: 0,
      hintsUsed: 0,
      selectedAnswer: null,
      isAnswered: false
    };

    // Inicialização do jogo
    function initGame() {
      // Carrega dados salvos
      loadGameData();
      
      // Configura eventos
      setupEventListeners();
      
      // Mostra tela inicial
      showSection('home');
      
      // Configura música de fundo
      setupAudio();
    }

    // Configura os ouvintes de eventos
    function setupEventListeners() {
      // Navegação principal
      document.getElementById('start-game').addEventListener('click', () => showSection('register'));
      document.getElementById('btn-home').addEventListener('click', () => showSection('home'));
      document.getElementById('btn-phases').addEventListener('click', () => showSection('phases'));
      document.getElementById('btn-ranking').addEventListener('click', () => showSection('ranking'));
      document.getElementById('btn-editor').addEventListener('click', () => showSection('editor-login'));
      
      // Navegação mobile
      document.getElementById('btn-menu').addEventListener('click', toggleMobileMenu);
      document.getElementById('m-btn-home').addEventListener('click', () => {
        showSection('home');
        toggleMobileMenu();
      });
      document.getElementById('m-btn-phases').addEventListener('click', () => {
        showSection('phases');
        toggleMobileMenu();
      });
      document.getElementById('m-btn-ranking').addEventListener('click', () => {
        showSection('ranking');
        toggleMobileMenu();
      });
      document.getElementById('m-btn-editor').addEventListener('click', () => {
        showSection('editor-login');
        toggleMobileMenu();
      });
      
      // Registro do jogador
      document.getElementById('btn-start-game').addEventListener('click', registerPlayer);
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.addEventListener('click', selectAvatar);
      });
      
      // Fases do jogo
      document.querySelectorAll('[data-phase]').forEach(btn => {
        btn.addEventListener('click', () => startPhase(parseInt(btn.getAttribute('data-phase'))));
      });
      
      // Quiz
      document.getElementById('btn-hint').addEventListener('click', useHint);
      document.getElementById('btn-next').addEventListener('click', nextQuestion);
      
      // Resultados
      document.getElementById('btn-next-phase').addEventListener('click', unlockNextPhase);
      document.getElementById('btn-back-phases').addEventListener('click', () => showSection('phases'));
      
      // Ranking
      document.getElementById('btn-ranking-back').addEventListener('click', () => showSection('home'));
      
      // Editor
      document.getElementById('btn-editor-login').addEventListener('click', accessEditor);
      document.getElementById('btn-editor-back').addEventListener('click', () => showSection('home'));
      document.getElementById('btn-editor-exit').addEventListener('click', () => showSection('home'));
      document.getElementById('editor-form').addEventListener('submit', saveQuestion);
      
      // Conclusão
      document.getElementById('btn-completion-ranking').addEventListener('click', () => showSection('ranking'));
      document.getElementById('btn-completion-home').addEventListener('click', () => showSection('home'));
      
      // Controle de música
      musicControl.addEventListener('click', toggleMusic);
    }

    // Configura o áudio do jogo
    function setupAudio() {
      // Tenta reproduzir a música (pode ser bloqueado por políticas do navegador)
      audio.backgroundMusic.volume = 0.3;
      audio.correctSound.volume = 0.5;
      audio.wrongSound.volume = 0.5;
      audio.completeSound.volume = 0.5;
      
      // Alguns navegadores exigem interação do usuário antes de reproduzir áudio
      document.addEventListener('click', () => {
        if (!isMusicPlaying) {
          audio.backgroundMusic.play().then(() => {
            isMusicPlaying = true;
            musicControl.innerHTML = '<i class="fas fa-pause text-white text-xl"></i>';
          }).catch(error => {
            console.log("Reprodução automática bloqueada:", error);
          });
        }
      }, { once: true });
    }

    // Alterna a música entre play/pause
    function toggleMusic() {
      if (isMusicPlaying) {
        audio.backgroundMusic.pause();
        musicControl.innerHTML = '<i class="fas fa-music text-white text-xl"></i>';
      } else {
        audio.backgroundMusic.play();
        musicControl.innerHTML = '<i class="fas fa-pause text-white text-xl"></i>';
      }
      isMusicPlaying = !isMusicPlaying;
    }

    // Alterna o menu mobile
    function toggleMobileMenu() {
      const menu = document.getElementById('mobile-menu');
      menu.classList.toggle('hidden');
    }

    // Mostra uma seção específica e esconde as outras
    function showSection(sectionId) {
      // Esconde todas as seções
      Object.values(sections).forEach(section => {
        section.classList.add('hidden');
      });
      
      // Mostra a seção solicitada
      sections[sectionId].classList.remove('hidden');
      
      // Atualiza dados específicos se necessário
      if (sectionId === 'phases') {
        updatePhaseButtons();
      } else if (sectionId === 'ranking') {
        updateRanking();
      }
    }

    // Registra o jogador
    function registerPlayer() {
      const nameInput = document.getElementById('player-name');
      const name = nameInput.value.trim();
      
      if (name === '') {
        alert('Por favor, insira um nome ou apelido.');
        return;
      }
      
      if (!gameData.player.avatar) {
        alert('Por favor, selecione um avatar.');
        return;
      }
      
      // Salva os dados do jogador
      gameData.player.name = name;
      gameData.player.score = 0;
      gameData.player.unlockedPhases = 1;
      gameData.player.completedPhases = [];
      
      // Atualiza o ranking se necessário
      const existingPlayer = gameData.ranking.find(p => p.name === name);
      if (!existingPlayer) {
        gameData.ranking.push({
          name: name,
          avatar: gameData.player.avatar,
          score: 0,
          title: 'Iniciante'
        });
      }
      
      // Salva os dados
      saveGameData();
      
      // Mostra as fases
      showSection('phases');
    }

    // Seleciona o avatar
    function selectAvatar(e) {
      const avatarOption = e.currentTarget;
      const avatarId = avatarOption.getAttribute('data-avatar');
      
      // Remove a seleção de todos os avatares
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.remove('border-yellow-400');
        option.classList.add('border-transparent');
      });
      
      // Seleciona o avatar clicado
      avatarOption.classList.add('border-yellow-400');
      avatarOption.classList.remove('border-transparent');
      
      // Salva o avatar selecionado
      gameData.player.avatar = avatarOption.querySelector('img').src;
    }

    // Atualiza os botões das fases (bloqueados/desbloqueados)
    function updatePhaseButtons() {
      for (let i = 1; i <= 5; i++) {
        const btn = document.getElementById(`phase-${i}-btn`);
        if (i <= gameData.player.unlockedPhases) {
          btn.disabled = false;
          btn.textContent = i === 1 ? 'Iniciar Fase 1' : `Iniciar Fase ${i}`;
        } else {
          btn.disabled = true;
          btn.textContent = 'Bloqueado';
        }
      }
    }

    // Inicia uma fase
    function startPhase(phase) {
      currentState.phase = phase;
      currentState.currentQuestion = 0;
      currentState.score = 0;
      currentState.hintsUsed = 0;
      
      // Atualiza a tela do quiz
      document.getElementById('phase-title').textContent = `Fase ${phase}`;
      document.getElementById('player-name-display').textContent = gameData.player.name;
      document.getElementById('quiz-avatar').src = gameData.player.avatar;
      document.getElementById('hints-left').textContent = 2;
      
      showSection('quiz');
      showQuestion();
    }

    // Mostra a pergunta atual
    function showQuestion() {
      const phaseQuestions = gameData.questions[currentState.phase];
      const question = phaseQuestions[currentState.currentQuestion];
      
      // Atualiza o contador de perguntas
      document.getElementById('current-question').textContent = currentState.currentQuestion + 1;
      document.getElementById('total-questions').textContent = phaseQuestions.length;
      
      // Mostra a pergunta
      document.getElementById('question-text').textContent = question.question;
      
      // Limpa respostas anteriores
      const answersContainer = document.getElementById('answers');
      answersContainer.innerHTML = '';
      
      // Adiciona as respostas
      question.answers.forEach((answer, index) => {
        const answerElement = document.createElement('button');
        answerElement.className = 'bg-white/5 hover:bg-white/10 border border-yellow-400/50 rounded-md p-4 text-left transition-colors';
        answerElement.textContent = answer;
        answerElement.addEventListener('click', () => selectAnswer(index));
        answersContainer.appendChild(answerElement);
      });
      
      // Reseta o estado
      currentState.selectedAnswer = null;
      currentState.isAnswered = false;
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('explanation').classList.add('hidden');
      document.getElementById('btn-next').disabled = true;
    }

    // Seleciona uma resposta
    function selectAnswer(answerIndex) {
      if (currentState.isAnswered) return;
      
      currentState.selectedAnswer = answerIndex;
      currentState.isAnswered = true;
      
      const phaseQuestions = gameData.questions[currentState.phase];
      const question = phaseQuestions[currentState.currentQuestion];
      const isCorrect = answerIndex === question.correct;
      
      // Atualiza a interface
      const answerButtons = document.querySelectorAll('#answers button');
      answerButtons.forEach((button, index) => {
        if (index === question.correct) {
          button.classList.remove('bg-white/5', 'hover:bg-white/10', 'border-yellow-400/50');
          button.classList.add('bg-green-500/30', 'border-green-500');
        } else if (index === answerIndex && !isCorrect) {
          button.classList.remove('bg-white/5', 'hover:bg-white/10', 'border-yellow-400/50');
          button.classList.add('bg-red-500/30', 'border-red-500');
        }
        button.disabled = true;
      });
      
      // Mostra feedback
      const feedback = document.getElementById('feedback');
      feedback.classList.remove('hidden');
      
      if (isCorrect) {
        feedback.textContent = 'Resposta Correta!';
        feedback.className = 'mt-6 text-lg font-semibold rounded-md p-4 bg-green-500/30 border border-green-500';
        audio.correctSound.play();
        currentState.score++;
      } else {
        feedback.textContent = 'Resposta Incorreta';
        feedback.className = 'mt-6 text-lg font-semibold rounded-md p-4 bg-red-500/30 border border-red-500';
        audio.wrongSound.play();
      }
      
      // Mostra explicação
      const explanation = document.getElementById('explanation');
      explanation.textContent = question.explanation;
      explanation.classList.remove('hidden');
      
      // Ativa o botão de próxima pergunta
      document.getElementById('btn-next').disabled = false;
    }

    // Usa uma dica
    function useHint() {
      if (currentState.hintsUsed >= 2 || currentState.isAnswered) return;
      
      const phaseQuestions = gameData.questions[currentState.phase];
      const question = phaseQuestions[currentState.currentQuestion];
      const answerButtons = document.querySelectorAll('#answers button');
      
      // Encontra duas respostas incorretas (que não sejam a correta e não já eliminadas)
      let eliminated = 0;
      for (let i = 0; i < answerButtons.length && eliminated < 2; i++) {
        if (i !== question.correct && !answerButtons[i].classList.contains('opacity-50')) {
          answerButtons[i].classList.add('opacity-50', 'line-through');
          answerButtons[i].disabled = true;
          eliminated++;
        }
      }
      
      currentState.hintsUsed++;
      document.getElementById('hints-left').textContent = 2 - currentState.hintsUsed;
      document.getElementById('btn-hint').disabled = currentState.hintsUsed >= 2;
    }

    // Vai para a próxima pergunta
    function nextQuestion() {
      const phaseQuestions = gameData.questions[currentState.phase];
      
      if (currentState.currentQuestion < phaseQuestions.length - 1) {
        currentState.currentQuestion++;
        showQuestion();
      } else {
        showResults();
      }
    }

    // Mostra os resultados da fase
    function showResults() {
      const phaseQuestions = gameData.questions[currentState.phase];
      const percentage = Math.round((currentState.score / phaseQuestions.length) * 100);
      
      // Atualiza a pontuação do jogador
      gameData.player.score += currentState.score * currentState.phase * 10; // Pontuação ponderada pela fase
      
      // Verifica se o jogador completou a fase (50% ou mais)
      const phaseCompleted = percentage >= 50;
      
      // Atualiza a interface
      document.getElementById('score-text').textContent = `Você acertou ${currentState.score} de ${phaseQuestions.length} perguntas (${percentage}%).`;
      
      const medalContainer = document.getElementById('medal-container');
      medalContainer.innerHTML = '';
      
      if (phaseCompleted) {
        // Adiciona medalha
        const medal = document.createElement('div');
        medal.className = 'flex flex-col items-center';
        medal.innerHTML = `
          <div class="w-16 h-16 rounded-full bg-yellow-400 flex items-center justify-center mb-2">
            <i class="fas fa-medal text-3xl text-[#0b1e3d]"></i>
          </div>
          <span class="text-yellow-400 font-semibold">Fase Concluída!</span>
        `;
        medalContainer.appendChild(medal);
        
        // Adiciona mensagem de feedback
        const feedbackMessage = document.getElementById('feedback-message');
        feedbackMessage.textContent = getPhaseFeedback(percentage);
        
        // Marca a fase como completada (se ainda não estiver)
        if (!gameData.player.completedPhases.includes(currentState.phase)) {
          gameData.player.completedPhases.push(currentState.phase);
        }
        
        audio.completeSound.play();
      } else {
        // Mensagem para tentar novamente
        const feedbackMessage = document.getElementById('feedback-message');
        feedbackMessage.textContent = 'Você precisa acertar pelo menos 50% para desbloquear a próxima fase. Tente novamente!';
        
        // Botão para tentar novamente
        document.getElementById('btn-next-phase').textContent = 'Tentar Novamente';
      }
      
      // Atualiza o ranking
      updatePlayerRanking();
      
      // Salva os dados
      saveGameData();
      
      // Mostra a tela de resultados
      showSection('results');
    }

    // Retorna feedback com base no desempenho
    function getPhaseFeedback(percentage) {
      if (percentage >= 90) {
        return 'Excelente! Você demonstrou domínio total sobre o conteúdo. Um verdadeiro filósofo!';
      } else if (percentage >= 70) {
        return 'Muito bom! Você tem um ótimo entendimento dos conceitos filosóficos.';
      } else if (percentage >= 50) {
        return 'Bom trabalho! Você compreendeu os conceitos básicos, mas pode melhorar.';
      } else {
        return 'Continue estudando! A filosofia requer reflexão e prática.';
      }
    }

    // Desbloqueia a próxima fase ou reinicia a atual
    function unlockNextPhase() {
      const phaseQuestions = gameData.questions[currentState.phase];
      const percentage = Math.round((currentState.score / phaseQuestions.length) * 100);
      
      if (percentage >= 50) {
        // Desbloqueia a próxima fase se não for a última
        if (currentState.phase < 5 && gameData.player.unlockedPhases <= currentState.phase) {
          gameData.player.unlockedPhases = currentState.phase + 1;
        }
        
        // Verifica se completou todas as fases
        if (gameData.player.completedPhases.length === 5) {
          showCompletionScreen();
          return;
        }
      }
      
      // Volta para a tela de fases
      showSection('phases');
    }

    // Mostra a tela de conclusão do jogo
    function showCompletionScreen() {
      // Cria confetes
      createConfetti();
      
      // Toca som de conclusão
      audio.completeSound.play();
      
      // Atualiza feedback final
      const finalFeedback = document.getElementById('final-feedback');
      const totalQuestions = Object.values(gameData.questions).reduce((sum, q) => sum + q.length, 0);
      const playerScore = gameData.player.score;
      const maxScore = totalQuestions * 5 * 10; // Pontuação máxima possível (5 fases)
      const performancePercentage = Math.round((playerScore / maxScore) * 100);
      
      let title = '';
      if (performancePercentage >= 90) {
        title = 'Mestre Filósofo';
        finalFeedback.textContent = 'Você alcançou a sabedoria filosófica! Seu desempenho foi excepcional em todas as fases.';
      } else if (performancePercentage >= 70) {
        title = 'Filósofo Iluminado';
        finalFeedback.textContent = 'Grande jornada! Você demonstrou um excelente entendimento dos conceitos filosóficos.';
      } else {
        title = 'Aprendiz da Filosofia';
        finalFeedback.textContent = 'Parabéns por completar todas as fases! Continue explorando o mundo da filosofia.';
      }
      
      // Atualiza o título do jogador no ranking
      const playerIndex = gameData.ranking.findIndex(p => p.name === gameData.player.name);
      if (playerIndex !== -1) {
        gameData.ranking[playerIndex].title = title;
        saveGameData();
      }
      
      showSection('completion');
    }

    // Cria efeito de confete
    function createConfetti() {
      const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff'];
      
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.animationDuration = `${2 + Math.random() * 3}s`;
        confetti.style.animationDelay = `${Math.random() * 0.5}s`;
        document.body.appendChild(confetti);
        
        // Remove o confete após a animação
        setTimeout(() => {
          confetti.remove();
        }, 3000);
      }
    }

    // Atualiza o ranking do jogador
    function updatePlayerRanking() {
      const playerIndex = gameData.ranking.findIndex(p => p.name === gameData.player.name);
      
      if (playerIndex !== -1) {
        // Atualiza a pontuação se for maior que a anterior
        if (gameData.player.score > gameData.ranking[playerIndex].score) {
          gameData.ranking[playerIndex].score = gameData.player.score;
          
          // Atualiza o título com base na pontuação
          if (gameData.player.score >= 2000) {
            gameData.ranking[playerIndex].title = 'Mestre Filósofo';
          } else if (gameData.player.score >= 1500) {
            gameData.ranking[playerIndex].title = 'Filósofo Iluminado';
          } else if (gameData.player.score >= 1000) {
            gameData.ranking[playerIndex].title = 'Pensador Crítico';
          } else if (gameData.player.score >= 500) {
            gameData.ranking[playerIndex].title = 'Aprendiz da Filosofia';
          } else {
            gameData.ranking[playerIndex].title = 'Iniciante';
          }
        }
      }
      
      // Ordena o ranking por pontuação
      gameData.ranking.sort((a, b) => b.score - a.score);
      
      // Salva os dados
      saveGameData();
    }

    // Atualiza a exibição do ranking
    function updateRanking() {
      const rankingList = document.getElementById('ranking-list');
      rankingList.innerHTML = '';
      
      gameData.ranking.forEach((player, index) => {
        const row = document.createElement('tr');
        row.className = 'hover:bg-white/5 transition-colors';
        row.innerHTML = `
          <td class="py-3 px-4">${index + 1}</td>
          <td class="py-3 px-4">${player.name}</td>
          <td class="py-3 px-4"><img src="${player.avatar}" alt="Avatar" class="w-8 h-8 rounded-full"></td>
          <td class="py-3 px-4">${player.score}</td>
          <td class="py-3 px-4">${player.title}</td>
        `;
        rankingList.appendChild(row);
      });
    }

    // Acessa o modo editor
    function accessEditor() {
      const token = document.getElementById('editor-token').value;
      
      if (token === 'editweb') {
        showSection('editor');
        document.getElementById('editor-token').value = '';
      } else {
        alert('Token incorreto. Acesso negado.');
      }
    }

    // Salva uma nova pergunta
    function saveQuestion(e) {
      e.preventDefault();
      
      const phase = parseInt(document.getElementById('editor-phase-select').value);
      const questionText = document.getElementById('editor-question-input').value.trim();
      const answer1 = document.getElementById('editor-answer1-text').value.trim();
      const answer2 = document.getElementById('editor-answer2-text').value.trim();
      const answer3 = document.getElementById('editor-answer3-text').value.trim();
      const answer4 = document.getElementById('editor-answer4-text').value.trim();
      const correctAnswer = parseInt(document.querySelector('input[name="editor-correct-answer"]:checked').value);
      const explanation = document.getElementById('editor-explanation-input').value.trim();
      
      // Validação básica
      if (!questionText || !answer1 || !answer2 || !answer3 || !explanation) {
        document.getElementById('editor-message').textContent = 'Por favor, preencha todos os campos obrigatórios.';
        document.getElementById('editor-message').className = 'mt-4 text-center font-semibold text-red-400';
        return;
      }
      
      // Cria o objeto da pergunta
      const newQuestion = {
        question: questionText,
        answers: [answer1, answer2, answer3],
        correct: correctAnswer,
        explanation: explanation
      };
      
      // Adiciona a quarta resposta se fornecida
      if (answer4) {
        newQuestion.answers.push(answer4);
      }
      
      // Adiciona a pergunta ao banco de dados
      if (!gameData.questions[phase]) {
        gameData.questions[phase] = [];
      }
      
      gameData.questions[phase].push(newQuestion);
      
      // Limpa o formulário
      document.getElementById('editor-form').reset();
      
      // Mostra mensagem de sucesso
      document.getElementById('editor-message').textContent = 'Pergunta salva com sucesso!';
      document.getElementById('editor-message').className = 'mt-4 text-center font-semibold text-green-400';
      
      // Salva os dados
      saveGameData();
    }

    // Salva os dados do jogo no localStorage
    function saveGameData() {
      localStorage.setItem('mentesEmJogoData', JSON.stringify(gameData));
    }

    // Carrega os dados do jogo do localStorage
    function loadGameData() {
      const savedData = localStorage.getItem('mentesEmJogoData');
      if (savedData) {
        const parsedData = JSON.parse(savedData);
        
        // Mantém as perguntas padrão se não houver perguntas salvas
        if (parsedData.questions) {
          gameData.questions = parsedData.questions;
        }
        
        // Atualiza outros dados
        gameData.ranking = parsedData.ranking || [];
        
        // Se houver um jogador ativo, carrega seus dados
        if (parsedData.player && parsedData.player.name) {
          gameData.player = parsedData.player;
        }
      }
    }

    // Inicia o jogo quando a página carrega
    window.addEventListener('DOMContentLoaded', initGame);
  </script>
</body>
</html>